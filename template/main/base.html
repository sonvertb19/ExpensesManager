{% load static %}

<!DOCTYPE html>
<html>
<head>
    {% block title_block %}
    {% endblock %}

    {% block extra_head_content %}
    {% endblock %}
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Kreon" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Concert+One" rel="stylesheet">
</head>
<body>
<style type="text/css">
		body{
			/*background-image: url({% static 'back3.png' %});*/
			font-family: Kreon;
			font-size: 18px;
		}
		.navbar-custom {
		    /*background-color: #087e8b!important;*/
		    /*background-color: #032e72!important;*/
		    /*background-color: #dd8980!important;*/
		    background-color: #0850b6!important;
		    /*background-color: #a4ae00!important;*/


		    opacity: 1;
		    color: white!important;
		    /*border-bottom: 1px black solid;*/
		}
		body{
			background-color: whitesmoke;
		}
		.nav-link{
			color: white!important;
		}
		.nav-link:hover{
			color: pink!important;
		}


/*		.dropdown-content {
		    display: none;
		    position: absolute;
		    right: 5%;
		    background-color: #f1f1f1;
		    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
		    z-index: 1;
		}

		.dropdown-content a {
		    color: black;
		    padding: 10px;
		    text-decoration: none;
		    display: block;
		}

		.dropdown-content a:hover {background-color: #ddd;}

		.dropdown1:hover .dropdown-content {display: block;}

		.dropdown1:hover .dropbtn {background-color: #4d82e4;  cursor: pointer;}*/

		#logo:hover{
			cursor: pointer;
		}
		#navbar_menu_button{
			background-color: #0850b6;
			color: white;
			border: none;
			/*border: 1px solid white;*/
			/*border-radius: 4px;*/
			padding-top: 8px;
		}
		#large_screen_logout{
			display: none;
		}
		#small_screen_logout{
			display: none;
		}
		#navbar_menu_button{
			cursor: pointer;
		}
		@media only screen and (min-width: 992px) {
		    #first_nav_link{
		    	margin-left: 30px;
		    }
		    #navbar_menu_button{
		    	display: none;
		    }
			#large_screen_logout{
		    	display: block;
			}
			#small_screen_main_navbar{
				display: none;
			}
		}
		@media only screen and (max-width: 992px) {
			#small_screen_logout{
				display: block;
			}
		}


</style>

{% if confirmed == False %}
<a href="{% url 'send_email_confirmation' %}" style="color: white">
    <div class="container-fluid btn btn-danger" style="border-radius: 0px">Confirm Your Email!</div>
</a>
{% endif %}

<nav class="navbar nav-default navbar-expand-lg navbar-dark navbar-custom">
    <div class="container">
        <button data-target="#small_screen_main_navbar" data-toggle="collapse" id="navbar_menu_button" type="button">
            <svg
                    height="30"
                    version="1.1"
                    viewBox="0 0 7.9374998 7.9375002"
                    width="30"
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:cc="http://creativecommons.org/ns#"
                    xmlns:dc
                    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                    xmlns:svg="http://www.w3.org/2000/svg">
                <g
                        id="layer1"
                        transform="translate(0,-289.06247)">
                    <rect
                            height="0.49147439"
                            id="rect3737"
                            rx="0.11693024"
                            ry="1.5367998"
                            style="opacity:0.98000004;fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.07513026;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                            width="6.7723083"
                            x="0.63959306"
                            y="290.57959"/>
                    <rect
                            height="0.49147439"
                            id="rect3759"
                            rx="0.11693024"
                            ry="1.5367998"
                            style="opacity:0.98000004;fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.07513026;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                            width="6.7723083"
                            x="0.63959306"
                            y="294.81299"/>
                    <rect
                            height="0.49147439"
                            id="rect3761"
                            rx="0.11693024"
                            ry="1.5367998"
                            style="opacity:0.98000004;fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.07513026;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                            width="6.7723083"
                            x="0.63959306"
                            y="292.69629"/>
                </g>
            </svg>
        </button>

        <ul class="nav navbar-nav ml-auto">
            <svg
                    height="40"
                    id="logo"
                    version="1.1"
                    viewBox="0 0 10.054167 7.6729173"
                    width="50"
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:cc="http://creativecommons.org/ns#"
                    xmlns:dc="http://purl.org/dc/elements/1.1/"
                    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                    xmlns:svg="http://www.w3.org/2000/svg">
                <defs
                        id="defs2367"/>
                <metadata
                        id="metadata2370">
                    <rdf:RDF>
                        <cc:Work
                                rdf:about="">
                            <dc:format>image/svg+xml</dc:format>
                            <dc:type
                                    rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>
                            <dc:title></dc:title>
                        </cc:Work>
                    </rdf:RDF>
                </metadata>
                <g
                        id="layer1"
                        style="display:inline"
                        transform="translate(0,-289.32702)">
                    <path
                            d="m 9.8045639,289.70561 0.020233,6.33273 c 0.017397,0.29128 -0.1472776,0.49613 -0.4981245,0.54702 l -8.69557863,0.0354 c -0.33898923,-0.01 -0.49511611,-0.25598 -0.50809689,-0.669 l -0.0133748,-6.2299 z"
                            id="path2938"
                            style="fill:#2900c8;fill-opacity:1;stroke:#0052c8;stroke-width:0.05864855;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"/>
                </g>
                <g
                        id="layer2"
                        style="display:inline"
                        transform="translate(0,-289.32702)">
                    <path
                            d="m 9.9719131,289.91294 0.020234,6.33276 c 0.017393,0.29125 -0.1472781,0.49614 -0.4981258,0.54703 l -8.69557602,0.0354 c -0.33898654,-0.01 -0.49511303,-0.25593 -0.50809424,-0.66896 l -0.0133746,-6.22988 z"
                            id="path2936"
                            style="fill:#fffffe;fill-opacity:1;stroke:#2900c8;stroke-width:0.05863607;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"/>
                    <rect
                            height="3.9192977"
                            id="rect4534"
                            rx="0"
                            ry="0"
                            style="opacity:0.98000004;fill:#37abc8;fill-opacity:1;stroke:none;stroke-width:0.13229166;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                            transform="rotate(0.27502743)"
                            width="0.91829103"
                            x="3.1585004"
                            y="291.77557"/>
                    <rect
                            height="2.7165849"
                            id="rect4545"
                            rx="0"
                            ry="0"
                            style="opacity:0.98000004;fill:#217867;fill-opacity:1;stroke:none;stroke-width:0.11013871;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                            transform="rotate(0.27502743)"
                            width="0.91829103"
                            x="4.2168341"
                            y="292.97827"/>
                    <rect
                            height="3.2845328"
                            id="rect4547"
                            rx="0"
                            ry="0"
                            style="opacity:0.98000004;fill:#4d4455;fill-opacity:1;stroke:none;stroke-width:0.12110585;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                            transform="rotate(0.27502743)"
                            width="0.91829103"
                            x="5.275167"
                            y="292.41031"/>
                </g>
                <g
                        id="layer3"
                        style="display:inline"
                        transform="translate(0,-289.32702)">
                    <path
                            d="m 7.7875686,293.76818 -0.3621957,-0.007 c -0.014908,-0.0609 -0.039344,-0.11869 -0.071966,-0.1713 l 0.4379145,0.0101 c 0.087746,8.8e-4 0.1608214,-0.0654 0.1630224,-0.14527 0.0013,-0.0821 -0.068175,-0.15016 -0.1565327,-0.15183 l -1.7572762,-0.0353 c -0.087746,-8.8e-4 -0.1608154,0.0655 -0.1630111,0.14525 -0.00131,0.082 0.068173,0.1502 0.156533,0.15182 l 0.7531544,0.0154 c 0.1310144,0.004 0.2436504,0.0741 0.2989699,0.17593 l -1.0557996,-0.0214 c -0.087746,-8.8e-4 -0.1608152,0.0655 -0.163012,0.14527 -0.00131,0.0821 0.068172,0.15017 0.1565422,0.15183 l 1.0557896,0.0214 c -0.059607,0.0999 -0.1752836,0.16617 -0.306289,0.16387 l -0.7531095,-0.0148 c -0.064987,-0.004 -0.123441,0.035 -0.1495686,0.0887 -0.025872,0.0552 -0.013915,0.11934 0.031099,0.16264 l 1.2299232,1.19318 c 0.030661,0.0286 0.071223,0.0449 0.1121451,0.0457 0.041319,0.002 0.08205,-0.013 0.1136098,-0.0434 0.063308,-0.0591 0.065808,-0.15076 0.00446,-0.21022 l -0.9627095,-0.93403 0.3674429,0.007 c 0.3098537,0.006 0.5748243,-0.18795 0.6523136,-0.45435 l 0.3619489,0.007 c 0.087746,8.7e-4 0.1608254,-0.0655 0.1629705,-0.14525 0.00131,-0.082 -0.068173,-0.15018 -0.1565336,-0.15181 z"
                            id="path9493-1-6"
                            style="fill:#00009a;fill-opacity:1;stroke:#2900c8;stroke-width:0.03549065;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"/>
                </g>
                <g
                        id="layer4"
                        transform="translate(0,-289.32702)">
                    <rect
                            height="0.32782507"
                            id="rect1173"
                            rx="0.25145605"
                            ry="0.12849143"
                            style="opacity:1;fill:#000095;fill-opacity:1;stroke:#2900c8;stroke-width:0.01787429;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                            transform="matrix(0.00169707,0.99999856,-0.99999862,0.00165966,0,0)"
                            width="1.1703738"
                            x="289.39285"
                            y="-8.8599806"/>
                    <rect
                            height="0.32782507"
                            id="rect4549"
                            rx="0.25145605"
                            ry="0.12849143"
                            style="opacity:1;fill:#000095;fill-opacity:1;stroke:#2900c8;stroke-width:0.01787429;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                            transform="matrix(0.00169707,0.99999856,-0.99999862,0.00165966,0,0)"
                            width="1.1703738"
                            x="289.39108"
                            y="-7.8016486"/>
                    <rect
                            height="0.32782507"
                            id="rect4551"
                            rx="0.25145605"
                            ry="0.12849143"
                            style="opacity:1;fill:#000095;fill-opacity:1;stroke:#2900c8;stroke-width:0.01787429;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                            transform="matrix(0.00169707,0.99999856,-0.99999862,0.00165966,0,0)"
                            width="1.1703738"
                            x="289.38931"
                            y="-6.7433171"/>
                    <rect
                            height="0.32782507"
                            id="rect4553"
                            rx="0.25145605"
                            ry="0.12849143"
                            style="opacity:1;fill:#000095;fill-opacity:1;stroke:#2900c8;stroke-width:0.01787429;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                            transform="matrix(0.00169707,0.99999856,-0.99999862,0.00165966,0,0)"
                            width="1.1703738"
                            x="289.38754"
                            y="-5.6849856"/>
                    <rect
                            height="0.32782507"
                            id="rect4555"
                            rx="0.25145605"
                            ry="0.12849143"
                            style="opacity:1;fill:#000095;fill-opacity:1;stroke:#2900c8;stroke-width:0.01787429;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                            transform="matrix(0.00169707,0.99999856,-0.99999862,0.00165966,0,0)"
                            width="1.1703738"
                            x="289.38577"
                            y="-4.6266541"/>
                    <rect
                            height="0.32782507"
                            id="rect4557"
                            rx="0.25145605"
                            ry="0.12849143"
                            style="opacity:1;fill:#000095;fill-opacity:1;stroke:#2900c8;stroke-width:0.01787429;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                            transform="matrix(0.00169707,0.99999856,-0.99999862,0.00165966,0,0)"
                            width="1.1703738"
                            x="289.384"
                            y="-3.5683224"/>
                    <rect
                            height="0.32782507"
                            id="rect4559"
                            rx="0.25145605"
                            ry="0.12849143"
                            style="opacity:1;fill:#000095;fill-opacity:1;stroke:#2900c8;stroke-width:0.01787429;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                            transform="matrix(0.00169707,0.99999856,-0.99999862,0.00165966,0,0)"
                            width="1.1703738"
                            x="289.38223"
                            y="-2.5099905"/>
                    <rect
                            height="0.32782507"
                            id="rect4561"
                            rx="0.25145605"
                            ry="0.12849143"
                            style="opacity:1;fill:#000095;fill-opacity:1;stroke:#2900c8;stroke-width:0.01787429;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                            transform="matrix(0.00169707,0.99999856,-0.99999862,0.00165966,0,0)"
                            width="1.1703738"
                            x="289.38046"
                            y="-1.4516587"/>
                    <rect
                            height="0.32782507"
                            id="rect4563"
                            rx="0.25145605"
                            ry="0.12849143"
                            style="opacity:1;fill:#000095;fill-opacity:1;stroke:#2900c8;stroke-width:0.01787429;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                            transform="matrix(0.00169707,0.99999856,-0.99999862,0.00165966,0,0)"
                            width="1.1703738"
                            x="289.37869"
                            y="-0.39332691"/>
                </g>
            </svg>
        </ul>

        <div class="collapse navbar-collapse" id="large_screen_main_navbar">
            <ul class="navbar-nav">

                {% if not user.is_authenticated %}

                {% else %}

                <li class="nav-item">
                    <a class="nav-link" href="{% url 'main:expense_list' %}" id="first_nav_link">List Expenses</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'main:add_expense' %}">Add Expense</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'main:category_add' %}">Categories</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'main:filter_by_date' %}">Filter by Date</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'main:change_password' %}">Change Password</a>
                </li>
                {% endif %}
            </ul>
        </div>

        <ul class="nav navbar-nav ml-auto">
            {% if user.is_authenticated %}
            <li class="nav-item navbar-right">
                <!-- <div class="dropdown1"> -->
            <li class="nav-item" id="large_screen_logout" style="margin-right: 10px;">
                <a class="nav-link" href="{% url 'main:user_logout' %}" style="">Logout</a>
            </li>
            <img class="dropbtn" height="40px" id="userImage" style="border:2px solid white; border-radius: 5px"
                 width="40px">
            <!-- <div class="dropdown-content" > -->
            <!-- <a href="{% url 'main:user_logout' %}">Logout</a> -->
            <!-- </div> -->
            <!-- </div> -->
            </li>
            {% else %}
            <li class="nav-item navbar-right">
                <a class="nav-link" href="{% url 'main:user_login' %}" style="color: white;">Login</a>
            </li>
            {% endif %}
        </ul>


    </div>
</nav>

<div class="collapse navbar-custom container-fluid" id="small_screen_main_navbar">
    <div class="container" style="padding: 0px;">
        <ul class="navbar-nav">
            <!-- <span style="border: 0.5px solid #90b0de"></span> -->

            {% if not user.is_authenticated %}
            <li class="nav-item">
                <a class="nav-link" href="{% url 'main:user_registration' %}">Sign Up</a>
            </li>

            <!-- <span style="border: 0.5px solid #90b0de"></span> -->


            {% else %}

            <li class="nav-item">
                <p class="small" style="margin: 0; color: #f4b2ff; font-family: sans-serif;">
                    <em>Manage Your Expenses</em>
                </p>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="{% url 'main:expense_list' %}" id="first_nav_link">List Expenses</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'main:add_expense' %}">Add Expense</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'main:category_add' %}">Categories</a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="{% url 'main:filter_by_date' %}">Filter by Date</a>
            </li>

            <!-- <span style="border: 0.5px solid #90b0de"></span> -->
            <li class="nav-item">
                <p class="small" style="margin: 0; color: #f4b2ff; font-family: sans-serif;">
                    <em>Manage Your Account</em>
                </p>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'main:change_password' %}">Change Password</a>
            </li>

            <!-- <span style="border: 0.5px solid #90b0de"></span> -->

            <li class="nav-item" id="small_screen_logout">
                <a class="nav-link" href="{% url 'main:user_logout' %}" style="">Logout</a>
            </li>

            <!-- <span style="border: 0.5px solid #90b0de"></span> -->

            {% endif %}
        </ul>
    </div>
    <br>
</div>


<canvas height="500" id="myCanvas" style="border:2px solid #000000; display: none;" width="500"></canvas>

<br>
<div class="container">

    {% block body_block %}
    {% endblock %}
</div>

{% if user.is_authenticated %}
<script>

		var canvas = document.getElementById('myCanvas');
		canvas.style.display = "none";
		var ctx = canvas.getContext("2d");
		ctx.fillStyle = "white";
		ctx.textAlign = "center"

		{% if user.first_name and user.last_name %}
			ctx.font = "250px monospace";
			var initials = "{{ user.first_name|first }}{{ user.last_name|first }}"
			ctx.fillText(initials, 250, 330);

		{% elif user.username %}
			ctx.font = "400px monospace";
			var initials = "{{ user.username|first }}"
			ctx.fillText(initials, 250, 360);
		{% endif %}


		var fullQuality = canvas.toDataURL();
		// alert(fullQuality)
		var uImage = document.getElementById('userImage');
		uImage.src = fullQuality;


		document.querySelector('#logo').addEventListener('click', function(){
				var address = window.location.protocol + "//" + window.location.host;
				console.log(address);
				window.location.assign(address);
			});


</script>
{% endif %}

<script>
			document.querySelector('#logo').addEventListener('click', function(){
				var address = window.location.protocol + "//" + window.location.host;
				console.log(address);
				window.location.assign(address);
			});


</script>

</body>
</html>